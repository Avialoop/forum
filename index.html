        isBlocked: false,
        isPinned: false
    };

    posts.push(newPost); // Добавляем новый пост в массив
    localStorage.setItem('posts', JSON.stringify(posts)); // Сохраняем изменения в localStorage
    renderPosts(); // Обновляем отображение постов на главной странице

    // Очищаем поля ввода после публикации
    document.getElementById("post-title").value = "";
    document.getElementById("post-content").value = "";
    document.getElementById("allow-comments").checked = false;
}

// Логика выхода из аккаунта
function logout() {
    currentUser = null; // Сбрасываем текущего пользователя
    isAdmin = false; // Сбрасываем флаг администратора
    document.getElementById("admin-panel-button").classList.add("hidden"); // Скрываем кнопку панели администратора
    document.getElementById("admin-login-button").classList.remove("hidden"); // Показываем кнопку входа как администратор
    alert("Вы вышли из системы."); // Уведомление о выходе
    showLogin(); // Показать форму входа
}

// Показать форму входа
function showLogin() {
    document.getElementById("form-container").innerHTML = `
        <h2>Вход</h2>
        <form id="login-form" onsubmit="handleLogin(event)">
            <input type="text" id="username" placeholder="Имя пользователя" required>
            <button type="submit">Войти</button>
            <p>Нет аккаунта? <a href="#" onclick="showRegistration()">Зарегистрируйтесь</a></p>
        </form>
    `;
    document.getElementById("form-container").classList.remove("hidden"); // Показываем форму
}

// Обработка логики входа
function handleLogin(event) {
    event.preventDefault(); // Предотвращаем перезагрузку страницы
    currentUser = document.getElementById("username").value; // Устанавливаем текущего пользователя
    alert("Вход выполнен!"); // Уведомление о входе
    document.getElementById("form-container").classList.add("hidden"); // Скрываем форму входа
    document.getElementById("admin-panel-button").classList.toggle("hidden", !isAdmin); // Показываем или скрываем кнопку панели администратора
    updateAccountInfo(); // Обновляем информацию о текущем пользователе
}

// Показать форму регистрации
function showRegistration() {
    document.getElementById("form-container").innerHTML = `
        <h2>Регистрация</h2>
        <form id="registration-form" onsubmit="handleRegistration(event)">
            <input type="text" id="new-username" placeholder="Имя пользователя" required>
            <button type="submit">Зарегистрироваться</button>
        </form>
    `;
    document.getElementById("form-container").classList.remove("hidden"); // Показываем форму
}

// Обработка логики регистрации
function handleRegistration(event) {
    event.preventDefault(); // Предотвращаем перезагрузку страницы
    const newUsername = document.getElementById("new-username").value;

    // Проверяем, существует ли пользователь с таким именем
    if (users.some(user => user.username === newUsername)) {
        alert("Пользователь с таким именем уже существует!");
        return;
    }

    // Добавляем нового пользователя
    users.push({ username: newUsername, isBlocked: false });
    localStorage.setItem('users', JSON.stringify(users)); // Сохраняем изменения в localStorage
    alert("Регистрация успешна!"); // Уведомление о регистрации
    showLogin(); // Показать форму входа после регистрации
}

// Обновление информации о текущем пользователе
function updateAccountInfo() {
    const accountInfo = document.getElementById("account-info");
    accountInfo.textContent = `Вход: ${currentUser}`;
}

// Загрузка пользователей из localStorage при загрузке страницы
window.onload = function() {
    const savedPosts = JSON.parse(localStorage.getItem('posts'));
    if (savedPosts) {
        posts = savedPosts; // Загружаем сохраненные посты
        renderPosts(); // Отображаем посты
    }
    const savedUsers = JSON.parse(localStorage.getItem('users'));
    if (savedUsers) {
        users = savedUsers; // Загружаем сохраненных пользователей
    }
};
